<idea-plugin>
    <id>org.tonyq.ci-load-analyzer</id>
    <name>CodeIgniter Load Analyzer</name>
    <version>1.0.0</version>
    <vendor email="tonylovejava@gmail.com" url="https://facebook.com/tonylovejava">TonyQ</vendor>

    <description><![CDATA[
    <p>Automatically analyzes CodeIgniter files for $this->load calls and generates corresponding PHPDoc @property annotations.</p>

    <h3>Features:</h3>
    <ul>
        <li>Auto-detect $this->load->library() calls</li>
        <li>Auto-detect $this->load->model() calls</li>
        <li>Auto-detect $this->load->database() calls</li>
        <li>Smart class name mapping</li>
        <li>Automatic duplicate property removal</li>
        <li>Support for updating existing PHPDoc annotations</li>
    </ul>

    <h3>Usage:</h3>
    <ol>
        <li>Right-click in a PHP file</li>
        <li>Select "Generate CodeIgniter Properties"</li>
        <li>Automatically generate @property annotations</li>
    </ol>
    ]]></description>

    <change-notes><![CDATA[
    <h3>Version 1.0.0</h3>
    <ul>
        <li>Initial release</li>
        <li>Support for Library, Model, Database load analysis</li>
        <li>Automatic PHPDoc property annotation generation</li>
        <li>Smart class name mapping</li>
        <li>Automatic duplicate property removal</li>
    </ul>
    ]]></change-notes>

    <!-- IntelliJ IDEA 版本相容性 -->
    <idea-version since-build="251.0" until-build="261.*"/>

    <!-- 支援的 IDE -->
    <depends>com.intellij.modules.platform</depends>
    <!-- 添加對 PHP 語言的支援，確保在 PhpStorm 中正常工作 -->
    <depends optional="true" config-file="php-support.xml">com.jetbrains.php</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- 無需額外的擴展點 -->
    </extensions>

    <actions>
        <action id="CodeIgniterLoadAnalyzer.GenerateProperties"
                class="org.tonyq.ciloadanalyzer.GeneratePropertiesAction"
                text="Generate CodeIgniter Properties"
                description="分析當前 PHP 檔案中的 $this->load 調用並生成 @property 註解">
            <!-- 在編輯器右鍵選單中顯示 -->
            <add-to-group group-id="EditorPopupMenu" anchor="after" relative-to-action="Generate"/>
            <!-- 也在 Code 選單中顯示 -->
            <add-to-group group-id="CodeMenu" anchor="after" relative-to-action="Generate"/>
            <!-- 快捷鍵：Ctrl+Shift+G (Windows/Linux) 或 Cmd+Shift+G (Mac) -->
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift G"/>
        </action>
    </actions>
</idea-plugin>